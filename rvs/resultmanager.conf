#Result Visualization Service gateway configurations



location /pbsworks/api/resultmanagerservice/rest/rmservice/toc {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}

location /pbsworks/api/resultmanagerservice/rest/rmservice/plot/data1 {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}

location /pbsworks/api/resultmanagerservice/rest/rmservice/allServersFilePatternsNew {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}

location /pbsworks/api/resultmanagerservice/rest/rmservice/getHWConfigDetails1 {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}

location /pbsworks/api/resultmanagerservice/rest/rmservice/allserversseriesfilepatternsNew {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}

location /pbsworks/api/resultmanagerservice/rest/rmservice/save/instance {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}

location /pbsworks/api/resultmanagerservice/rest/rmservice/rvp/plt/view {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}

location /pbsworks/api/resultmanagerservice/rest/rmservice/refresh/plot {
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass http://172.16.80.133:8083;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;

}


set $access_token "";
location /pbsworks/api/resultmanagerservice {
    rewrite ^/pbsworks/api/(.*) /$1 break;
    proxy_read_timeout 600;
    rewrite_handler_type 'java';
    rewrite_handler_name 'com.altair.pbsworks.nginx.PBSAccessAuthHandler';
    proxy_pass https://resultmanager;
    proxy_set_header Authorization "Bearer $access_token";
    add_header Set-Cookie "access_token=$access_token;Path=/;HttpOnly;Max-Age=86400" always;
    add_header access-token "$access_token";
    proxy_pass_header Set-Cookie;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   Host      $http_host;
}
